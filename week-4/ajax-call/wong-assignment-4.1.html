<!-- /*
============================================
; Title: Exercise 4.1
; Author: Devan Wong
; Date: 27 August 2020
; Description: Part of the discussion to use the an example of ajax. 
;===========================================
*/  -->

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>jQuery.ajax()</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
            crossorigin="anonymous">
    </head>
    <body class="col-md-12">
        <!-- headline -->
        <h1>jQuery.ajax()</h1>
        <!-- were the JSON will be displayed -->
        <div id="display-json">
            <p>This will disappear after button is clicked to show api</p>
        </div>
        <!-- button to grab JSON -->
        <a href="#" class="btn btn-primary" id="grab-api">Retrieve List</a>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </body>
    <!-- script has to be at the bottom of the HTML -->
    <script>
    //jquery starts here. 
    $(document).ready(function() {
        // button actions
        $("#grab-api").click(function() {
            var displayJson = $("#display-json");
            displayJson.text("Loading data from JSON source...");
            //ajax call
            $.ajax({
            type: "GET",
            url: "https://jsonplaceholder.typicode.com/posts", // dummy data found on the internet
            success: function(result) {
                var output =
                "<table><thead><tr><th>ID</th><th>Title</th><th>Body</th></thead><tbody>";
                for (var i in result) {
                output +=
                    "<tr><td>" +
                    result[i].id +
                    "</td><td>" +
                    result[i].title +
                    "</td><td>" +
                    result[i].body +
                    "</td></tr>";
                }
                output += "</tbody></table>";
                displayJson.html(output);
                $("table").addClass("table");
            }
            });
        });
    });
    //end of jquery
    </script>
</html>